# Test Case 4: Minimal cluster (1 CP + 1 worker)
# Smallest valid multinode cluster configuration
apiVersion: holodeck.nvidia.com/v1alpha1
kind: Environment
metadata:
  name: test-cluster-minimal
  description: "E2E test: Minimal cluster (1 CP + 1 worker)"
spec:
  provider: aws
  auth:
    keyName: cnt-ci
    privateKey: ~/.ssh/cnt-ci.pem

  cluster:
    region: us-west-1

    controlPlane:
      count: 1
      instanceType: t3.large     # Small CPU instance
      dedicated: false           # Allow workloads (since only 2 nodes)
      rootVolumeSizeGB: 50

    workers:
      count: 1
      instanceType: t3.large     # Small CPU instance
      rootVolumeSizeGB: 50

  # Minimal software stack (no GPU)
  containerRuntime:
    install: true
    name: containerd
  kubernetes:
    install: true
    installer: kubeadm
