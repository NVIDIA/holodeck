apiVersion: holodeck.nvidia.com/v1alpha1
kind: Environment
metadata:
  name: holodeck-aws-k8s-git-e2e
  description: "E2E test for Kubernetes installation from git source (kubeadm)"
spec:
  provider: aws
  auth:
    keyName: cnt-ci
    privateKey: ~/.ssh/cnt-ci.pem
  instance:
    type: g4dn.xlarge
    region: us-west-1
    image:
      architecture: amd64
  containerRuntime:
    install: true
    name: containerd
  nvidiaContainerToolkit:
    install: true
    enableCDI: true
  nvidiaDriver:
    install: true
  kubernetes:
    install: true
    installer: kubeadm
    source: git
    git:
      # Build from a specific release tag (faster than building from master)
      ref: v1.31.0
